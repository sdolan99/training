#!/bin/bash

function test {
  local file=${1-all.test.rb}
  bundle exec ruby $file
}

function lint {
  bundle exec rubocop "$@"
}

function build {
  lint
  test
}

function acquisition_tracker {
  bundle exec ruby main.rb "$@"
}

function be {
  bundle exec "$@"
}

function repl {
  [[ $1 ]] && export AT_DEV=true
  bundle exec pry \
    -r './main.rb' \
    -e 'include AcquisitionTracker; Commands.hydrate Journal.load_journal_entries;nil'
}

function server {
  bundle exec rackup
}
if [[ $# -gt 0 ]]; then
  eval "$1" "${@:2}"
fi
